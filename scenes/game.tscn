[gd_scene load_steps=14 format=3 uid="uid://dkfy3y2orda1t"]

[ext_resource type="Script" uid="uid://dldp6b70n8ccj" path="res://scripts/game.gd" id="1_yqjtg"]
[ext_resource type="PackedScene" uid="uid://yp3oyehyqa4a" path="res://scenes/dino.tscn" id="2_iywne"]
[ext_resource type="PackedScene" uid="uid://dr1872ok4d46m" path="res://scenes/data_manager.tscn" id="3_dinhu"]
[ext_resource type="Script" uid="uid://bed13xsg2p3j6" path="res://scripts/stats.gd" id="3_lnu2h"]
[ext_resource type="Script" uid="uid://c7g8310sk5fnh" path="res://scripts/pixel_art_manager.gd" id="3_p57ef"]
[ext_resource type="PackedScene" uid="uid://dhgao3k34766f" path="res://scenes/options_menu.tscn" id="4_kvuet"]
[ext_resource type="PackedScene" uid="uid://c24yr7xx7bwps" path="res://scenes/island.tscn" id="4_lbhrr"]
[ext_resource type="PackedScene" uid="uid://cf6u8mc1ko724" path="res://scenes/space.tscn" id="4_vtaks"]
[ext_resource type="PackedScene" uid="uid://58q7a2w4p7g1" path="res://scenes/meteorite.tscn" id="6_vtaks"]
[ext_resource type="Texture2D" uid="uid://bxyygs7sd6vmx" path="res://assets/images/frame.png" id="8_trtic"]
[ext_resource type="FontFile" uid="uid://m4cqhajh3qxk" path="res://assets/fonts/Tiny5/Tiny5-Regular.ttf" id="9_0tnpc"]
[ext_resource type="PackedScene" uid="uid://dh1odu7gvadb0" path="res://scenes/fade_transition.tscn" id="11_kvpfn"]
[ext_resource type="PackedScene" uid="uid://b7qv2xt8iio7u" path="res://scenes/dino_button_node.tscn" id="11_kvuet"]

[node name="Game" type="Node3D"]
script = ExtResource("1_yqjtg")
stego_scene = ExtResource("2_iywne")
metadata/_edit_horizontal_guides_ = [-406.0]

[node name="DataManager" parent="." instance=ExtResource("3_dinhu")]

[node name="PixelArtManager" type="Node" parent="." node_paths=PackedStringArray("lighting_node")]
script = ExtResource("3_p57ef")
pixel_node_paths = [NodePath("../Scenery/Island"), NodePath("../Scenery/Meteorite")]
lighting_node = NodePath("../Lighting/DirectionalLight3D")

[node name="MainCamera" type="Camera3D" parent="."]
transform = Transform3D(0.99939084, 0.03489949, 0, -0.034369294, 0.9842077, 0.17364816, 0.006060234, -0.17354238, 0.9848076, -30, 15, 50)

[node name="Scenery" type="Node" parent="."]

[node name="Space" parent="Scenery" instance=ExtResource("4_vtaks")]
transform = Transform3D(1, 0, 0, 0, 0.17364822, -0.9848077, 0, 0.9848077, 0.17364822, 0.11505127, -0.64645386, -99.489624)

[node name="Island" parent="Scenery" groups=["island"] instance=ExtResource("4_lbhrr")]
transform = Transform3D(0.693691, 0, 0.7202727, 0, 1, 0, -0.7202727, 0, 0.693691, 0, 0, 0)

[node name="Meteorite" parent="Scenery" instance=ExtResource("6_vtaks")]
transform = Transform3D(0.3851975, 0.92283416, 0, -0.92283416, 0.3851975, 0, 0, 0, 1, 30, 20, 0)

[node name="ControlLayer" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Frame" type="Sprite2D" parent="ControlLayer"]
position = Vector2(960, 540)
texture = ExtResource("8_trtic")

[node name="Stats" type="VBoxContainer" parent="ControlLayer"]
clip_contents = true
custom_minimum_size = Vector2(840, 100)
layout_mode = 1
anchors_preset = -1
offset_left = 30.0
offset_top = 85.0
offset_right = 840.0
offset_bottom = 143.0
script = ExtResource("3_lnu2h")

[node name="AddedTimeLabel" type="Label" parent="ControlLayer/Stats"]
visible = false
layout_mode = 2
theme_override_colors/font_color = Color(0.50662, 0.82022494, 0.26477304, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("9_0tnpc")
theme_override_font_sizes/font_size = 40
text = "+0"

[node name="TimerLabel" type="Label" parent="ControlLayer/Stats"]
layout_mode = 2
theme_override_colors/font_color = Color(0.975779, 0.6065958, 0.3196563, 1)
theme_override_fonts/font = ExtResource("9_0tnpc")
theme_override_font_sizes/font_size = 40
text = "60s before crash | 10 stomps per/s to add time"

[node name="StompLabel" type="Label" parent="ControlLayer/Stats"]
layout_mode = 2
theme_override_fonts/font = ExtResource("9_0tnpc")
theme_override_font_sizes/font_size = 40
text = "0 stomps"
vertical_alignment = 1

[node name="FruitsLabel" type="Label" parent="ControlLayer/Stats"]
layout_mode = 2
theme_override_fonts/font = ExtResource("9_0tnpc")
theme_override_font_sizes/font_size = 40
text = "0 fruits"
vertical_alignment = 1

[node name="DinoButtonsRow1" type="VBoxContainer" parent="ControlLayer"]
custom_minimum_size = Vector2(400, 650)
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 30.0
offset_top = -690.0
offset_right = 430.0
offset_bottom = -40.0
alignment = 1

[node name="StegoButtonNode" parent="ControlLayer/DinoButtonsRow1" instance=ExtResource("11_kvuet")]
clip_contents = true
custom_minimum_size = Vector2(275, 230)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
dino_type = "stego"

[node name="DinoButtonsRow3" type="VBoxContainer" parent="ControlLayer"]
custom_minimum_size = Vector2(400, 650)
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 440.0
offset_top = -690.0
offset_right = 840.0
offset_bottom = -40.0
alignment = 1

[node name="PteroButton" parent="ControlLayer/DinoButtonsRow3" instance=ExtResource("11_kvuet")]
clip_contents = true
custom_minimum_size = Vector2(275, 230)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
dino_type = "ptero"

[node name="OptionButton" type="Button" parent="ControlLayer"]
layout_mode = 0
offset_left = 30.0
offset_top = 29.0
offset_right = 145.0
offset_bottom = 79.0
text = "Options
"

[node name="FadeTransition" parent="ControlLayer" instance=ExtResource("11_kvpfn")]
visible = false
layout_mode = 1
mouse_filter = 2

[node name="GameOverTimer" type="Timer" parent="ControlLayer/FadeTransition"]
wait_time = 0.9

[node name="Lighting" type="Node" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Lighting"]
transform = Transform3D(0.4894308, -0.70031744, -0.5196281, 0.21734345, -0.47910887, 0.8504215, -0.84452313, -0.5291603, -0.08228141, 0.3539467, 37.296867, -0.46103096)
light_color = Color(0.9340138, 0.88441217, 0.32009438, 1)
light_energy = 0.5
light_cull_mask = 4294967293
shadow_enabled = true
shadow_caster_mask = 4294967293
sky_mode = 1

[node name="OptionsMenu" parent="." instance=ExtResource("4_kvuet")]
visible = false

[connection signal="fruits_change" from="." to="ControlLayer/Stats" method="_on_game_fruits_change"]
[connection signal="island_clicked" from="." to="." method="_on_island_clicked"]
[connection signal="island_clicked" from="." to="Scenery/Island" method="_on_game_island_clicked"]
[connection signal="reset_data" from="." to="." method="_on_reset_data"]
[connection signal="restart_game" from="." to="." method="_on_restart_game"]
[connection signal="stomps_change" from="." to="ControlLayer/Stats" method="_on_game_stomps_change"]
[connection signal="reset_data" from="DataManager" to="DataManager" method="_on_reset_data"]
[connection signal="update_timer_tag" from="DataManager" to="ControlLayer/Stats" method="_on_data_manager_update_timer_tag"]
[connection signal="game_over" from="Scenery/Meteorite" to="." method="_on_meteorite_game_over"]
[connection signal="update_timer_tag" from="Scenery/Meteorite" to="ControlLayer/Stats" method="_on_data_manager_update_timer_tag"]
[connection signal="dino_purchased" from="ControlLayer/DinoButtonsRow1/StegoButtonNode" to="ControlLayer/DinoButtonsRow1/StegoButtonNode" method="_on_dino_purchased"]
[connection signal="fruits_change" from="ControlLayer/DinoButtonsRow1/StegoButtonNode" to="ControlLayer/Stats" method="_on_stego_button_node_fruits_change"]
[connection signal="button_down" from="ControlLayer/OptionButton" to="OptionsMenu" method="_on_button_button_down"]
[connection signal="timeout" from="ControlLayer/FadeTransition/GameOverTimer" to="." method="_on_game_over_timer_timeout"]
